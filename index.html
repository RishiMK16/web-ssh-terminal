<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Frontend SSH Terminal</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/xterm/css/xterm.css" />
  <link rel="stylesheet" href="styles/style.css" />
  <style>
    #terminal {
      width: 100vw;
      height: 80vh;
    }
  </style>
</head>
<body>
  <div id="terminal"></div>

  <!-- Load xterm UMD globally -->
  <script src="https://cdn.jsdelivr.net/npm/xterm/lib/xterm.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/xterm-addon-fit/lib/xterm-addon-fit.min.js"></script>

  <!-- Diagnostics: show script load status in-page for headless debugging -->
  <script>
    (function(){
      const container = document.getElementById('terminal');
      function diag(msg){
        // append simple messages so we can see progress if terminal fails
        const p = document.createElement('div');
        p.style.color = 'white';
        p.style.fontFamily = 'monospace';
        p.textContent = msg;
        container.appendChild(p);
      }
      diag('Diagnostics: DOM ready');
      diag('Terminal available: ' + (typeof window.Terminal !== 'undefined'));
      diag('FitAddon available: ' + (typeof window.FitAddon !== 'undefined'));
    })();
  </script>

  <!-- Capture runtime errors and show them in the terminal container -->
  <script>
    (function(){
      const container = document.getElementById('terminal');
      function showErr(msg){
        const p = document.createElement('div');
        p.style.color = 'salmon';
        p.style.fontFamily = 'monospace';
        p.textContent = msg;
        container.appendChild(p);
      }

      window.addEventListener('error', function(e){
        showErr('Error: ' + (e.message || e.error && e.error.message) + ' at ' + (e.filename || ''));
      });

      window.addEventListener('unhandledrejection', function(e){
        showErr('Unhandled rejection: ' + (e.reason && e.reason.message ? e.reason.message : JSON.stringify(e.reason)));
      });
    })();
  </script>

  <!-- Load app entry -->
  <script type="module" src="main.js"></script>
</body>
</html>
